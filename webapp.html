<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blackjack Game</title>
    <style>
        body {
            background: #0b0b0b;
            color: gold;
            font-family: Arial, sans-serif;
            text-align: center;
            margin: 0;
            padding: 20px;
        }
        h1 { margin-bottom: 10px; }
        #game {
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        .cards {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin: 10px 0;
        }
        .card {
            width: 60px;
            height: 90px;
            border-radius: 8px;
            background: white;
            color: black;
            display: flex;
            justify-content: center;
            align-items: center;
            font-weight: bold;
            box-shadow: 0 4px 8px rgba(0,0,0,0.5);
            transition: transform 0.3s ease;
        }
        .controls button {
            margin: 5px;
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            background: gold;
            color: #0b0b0b;
            font-size: 16px;
            cursor: pointer;
            transition: transform 0.2s ease;
        }
        .controls button:hover {
            transform: scale(1.1);
        }
        .status, .betting {
            margin: 15px 0;
        }
        input[type='number'] {
            padding: 5px;
            border-radius: 5px;
            border: 1px solid #555;
            width: 60px;
        }
    </style>
</head>
<body>
<h1>Blackjack</h1>
<div class="navigation" style="margin-bottom: 20px;">
    <button onclick="location.href='index.html'">Home</button>
    <button onclick="location.href='rules.html'">Rules</button>
    <button onclick="location.href='highscores.html'">High Scores</button>
</div>

<div id="game">
    <div class="status" id="status">Place your bet!</div>
    <div class="betting">
        Bet: $<input type="number" id="betAmount" value="100" min="1">
        <button onclick="startGame()">Deal</button>
    </div>
    <div>
        <h2>Dealer</h2>
        <div class="cards" id="dealerCards"></div>
    </div>
    <div>
        <h2>Player</h2>
        <div class="cards" id="playerCards"></div>
    </div>
    <div class="controls">
        <button onclick="hit()">Hit</button>
        <button onclick="stand()">Stand</button>
        <button onclick="resetGame()">Reset Game</button>
    </div>
    <div class="status">Balance: $<span id="balance">1000</span></div>
</div>
<script>
let deck, playerHand, dealerHand, balance = 1000, gameOver = false;

function createDeck() {
    const suits = ['♠', '♥', '♦', '♣'];
    const values = ['A','2','3','4','5','6','7','8','9','10','J','Q','K'];
    deck = [];
    for (let suit of suits) {
        for (let value of values) {
            deck.push({value, suit});
        }
    }
    deck.sort(() => Math.random() - 0.5);
}

function cardValue(card) {
    if (['J','Q','K'].includes(card.value)) return 10;
    if (card.value === 'A') return 11;
    return parseInt(card.value);
}

function handValue(hand) {
    let value = hand.reduce((acc, card) => acc + cardValue(card), 0);
    let aces = hand.filter(c => c.value === 'A').length;
    while (value > 21 && aces) {
        value -= 10;
        aces--;
    }
    return value;
}

function dealCard(hand) {
    hand.push(deck.pop());
}

function updateDisplay() {
    document.getElementById('playerCards').innerHTML = playerHand.map(c => `<div class='card'>${c.value}${c.suit}</div>`).join('');
    
    // Hide second dealer card until player stands
    if (gameOver) {
        document.getElementById('dealerCards').innerHTML = dealerHand.map(c => `<div class='card'>${c.value}${c.suit}</div>`).join('');
    } else {
        document.getElementById('dealerCards').innerHTML = `<div class='card'>${dealerHand[0].value}${dealerHand[0].suit}</div><div class='card'>?</div>`;
    }

    document.getElementById('balance').innerText = balance;
}

function startGame() {
    const bet = parseInt(document.getElementById('betAmount').value);
    if (bet > balance || bet <= 0) return alert("Invalid bet!");

    balance -= bet; // Deduct bet upfront
    createDeck();
    playerHand = [];
    dealerHand = [];

    dealCard(playerHand);
    dealCard(dealerHand);
    dealCard(playerHand);
    dealCard(dealerHand);

    updateDisplay();
    document.getElementById('status').innerText = "Your move!";
    gameOver = false; // Allow actions
}

function hit() {
    if (gameOver) return; // Stop action after round ends

    dealCard(playerHand);
    updateDisplay();
    if (handValue(playerHand) > 21) endGame();
}

function stand() {
    gameOver = true;
    while (handValue(dealerHand) < 17) {
        dealCard(dealerHand);
    }
    endGame();
}

function endGame() {
    const bet = parseInt(document.getElementById('betAmount').value);
    const playerTotal = handValue(playerHand);
    const dealerTotal = handValue(dealerHand);
    let message = '';

    if (playerTotal > 21) {
        message = `You Bust! Dealer Wins with ${dealerTotal}.`;
    } else if (dealerTotal > 21) {
        message = `Dealer Busts! You Win with ${playerTotal}.`;
        balance += bet * 2; 
    } else if (playerTotal > dealerTotal) {
        message = `You Win with ${playerTotal} against Dealer's ${dealerTotal}.`;
        balance += bet * 2;
    } else if (dealerTotal === playerTotal) {
        message = `Push! Both have ${playerTotal}.`;
        balance += bet;
    } else {
        message = `Dealer Wins with ${dealerTotal} against your ${playerTotal}.`;
    }

    document.getElementById('status').innerText = message;
    updateDisplay();
}

function resetGame() {
    balance = 1000;
    playerHand = [];
    dealerHand = [];
    document.getElementById('status').innerText = "Place your bet!";
    updateDisplay();
}

resetGame();
</script>
</body>
</html>